/* =============================================================
   question.css  --  programmer dark theme
   Matches lessons.css tokens and visual language exactly.
============================================================= */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');

/* --- Tokens ------------------------------------------------ */
:root {
  --bg:         #0f0e0d;
  --surface:    #161412;
  --surface2:   #1e1a17;
  --surface3:   #272320;
  --border:     rgba(255,255,255,.07);
  --border-hi:  rgba(192,99,58,.3);
  --text:       #f0e8df;
  --text-sub:   #8a7a6e;
  --muted:      #5a4f47;
  --accent:     #c0633a;
  --accent2:    #d4943a;
  --accent-lo:  rgba(192,99,58,.12);
  --green:      #3ab87a;
  --green-lo:   rgba(58,184,122,.1);
  --red:        #e05c5c;
  --red-lo:     rgba(224,92,92,.1);
  --locked:     #3a3330;
  --mono:       'JetBrains Mono', monospace;
  --sans:       'Inter', sans-serif;
  --r:          14px;
  --r-sm:       8px;
  --pill:       99px;
  --shadow:     0 4px 24px rgba(0,0,0,.55);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

::-webkit-scrollbar       { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface3); border-radius: 99px; }

/* =============================================================
   ROOT — fills viewport exactly, no overflow
============================================================= */
.qp-root {
  width: 100%; height: 100vh;
  background: var(--bg); color: var(--text);
  font-family: var(--sans);
  display: flex; flex-direction: column;
  position: relative; overflow: hidden;
}

.qp-bg-grid {
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 55% 45% at 5%  10%, rgba(192,99,58,.07) 0%, transparent 70%),
    radial-gradient(ellipse 40% 35% at 95% 90%, rgba(212,148,58,.05) 0%, transparent 70%);
}
.qp-bg-grid::before {
  content: '';
  position: absolute; inset: 0;
  background-image: radial-gradient(rgba(255,255,255,.022) 1px, transparent 1px);
  background-size: 28px 28px;
}

/* =============================================================
   HEADER  (58px fixed)
============================================================= */
.qp-header {
  flex-shrink: 0;
  display: grid; grid-template-columns: auto 1fr auto;
  align-items: center; gap: 16px;
  padding: 0 32px; height: 58px;
  background: rgba(15,14,13,.93);
  backdrop-filter: blur(16px) saturate(1.3);
  -webkit-backdrop-filter: blur(16px) saturate(1.3);
  border-bottom: 1px solid var(--border);
  position: relative; z-index: 100;
}

.qp-back {
  background: none; border: 1px solid transparent; cursor: pointer;
  color: var(--text-sub); font-family: var(--sans);
  font-size: .74rem; font-weight: 700; letter-spacing: .05em; text-transform: uppercase;
  padding: 6px 14px; border-radius: var(--r-sm);
  transition: color .15s, background .15s, border-color .15s; white-space: nowrap;
}
.qp-back:hover { color: var(--text); background: var(--surface2); border-color: var(--border); }

.qp-header-center { display: flex; align-items: center; gap: 8px; font-size: .82rem; overflow: hidden; }
.qp-chapter {
  font-family: var(--mono); font-size: .68rem; font-weight: 600;
  color: var(--accent); background: var(--accent-lo);
  border: 1px solid var(--border-hi);
  padding: 3px 9px; border-radius: 4px; flex-shrink: 0;
}
.qp-sep   { color: var(--muted); font-family: var(--mono); }
.qp-title { font-weight: 700; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.qp-header-right { display: flex; align-items: center; gap: 8px; }

.qp-done-pill {
  font-family: var(--mono); font-size: .6rem; font-weight: 600;
  letter-spacing: .06em; text-transform: uppercase;
  padding: 3px 10px; border-radius: 4px;
  background: var(--green-lo); color: var(--green);
  border: 1px solid rgba(58,184,122,.2);
}

.qp-avatar {
  width: 32px; height: 32px; border-radius: 50%;
  background: linear-gradient(135deg, #c0633a, #e8c06a);
  display: flex; align-items: center; justify-content: center;
  font-size: .62rem; font-weight: 800; color: #fff; letter-spacing: .04em;
  border: 1.5px solid rgba(255,255,255,.12); cursor: pointer;
  transition: transform .15s, box-shadow .15s;
}
.qp-avatar:hover { transform: scale(1.1); box-shadow: 0 0 0 3px rgba(192,99,58,.25); }

/* =============================================================
   BODY  — fills remaining height exactly
============================================================= */
.qp-body {
  flex: 1; min-height: 0;
  position: relative; z-index: 1;
  display: grid;
  grid-template-columns: 300px 1fr;
}

/* =============================================================
   PROBLEM SIDEBAR
============================================================= */
.qp-sidebar {
  border-right: 1px solid var(--border);
  padding: 24px 20px 32px;
  display: flex; flex-direction: column; gap: 20px;
  overflow-y: auto;
  background: var(--surface);
  scrollbar-width: thin; scrollbar-color: var(--surface3) transparent;
}

/* ── Problem card ── */
.qp-problem-card {
  display: flex; flex-direction: column; gap: 16px;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border);
}

.qp-problem-label {
  font-size: .72rem; font-weight: 800; letter-spacing: .2em;
  text-transform: uppercase; color: var(--accent);
  background: var(--accent-lo);
  border: 1px solid var(--border-hi);
  padding: 4px 10px; border-radius: 4px;
  align-self: flex-start;
}

.qp-problem-title {
  font-size: 1.55rem; font-weight: 800; letter-spacing: -.5px; line-height: 1.15;
  color: var(--text);
}

.qp-problem-desc {
  font-size: .88rem; color: var(--text); line-height: 1.75;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  padding: 14px 16px;
}

.qp-expected {
  background: var(--surface3);
  border: 1px solid var(--border-hi);
  border-radius: var(--r-sm); padding: 14px;
  display: flex; flex-direction: column; gap: 8px;
}
.qp-expected-label {
  font-size: .58rem; font-weight: 800; letter-spacing: .13em;
  text-transform: uppercase; color: var(--accent2);
}
.qp-expected-code {
  font-family: var(--mono); font-size: .8rem; color: var(--accent2);
  white-space: pre-wrap; word-break: break-all; line-height: 1.7;
}

.qp-constraints { display: flex; flex-direction: column; gap: 8px; }
.qp-constraints ul { padding-left: 14px; display: flex; flex-direction: column; gap: 4px; }
.qp-constraints li { font-size: .8rem; color: var(--text-sub); line-height: 1.5; }

/* ── Generate section ── */
.qp-generate-section { display: flex; flex-direction: column; gap: 10px; }

.qp-generate-btn {
  width: 100%; padding: 12px;
  background: var(--accent-lo); color: var(--accent);
  border: 1px solid var(--border-hi); border-radius: var(--r-sm);
  font-family: var(--sans); font-size: .8rem; font-weight: 700;
  cursor: pointer; letter-spacing: .02em;
  transition: background .15s, box-shadow .15s, transform .15s;
}
.qp-generate-btn:hover:not(:disabled) {
  background: rgba(192,99,58,.22);
  box-shadow: 0 0 18px rgba(192,99,58,.2);
  transform: translateY(-1px);
}
.qp-generate-btn:disabled { opacity: .45; cursor: default; }

.qp-gen-error {
  font-family: var(--mono); font-size: .68rem; color: var(--red);
  padding: 6px 10px; border-radius: var(--r-sm);
  background: var(--red-lo); border: 1px solid rgba(224,92,92,.2);
}

.qp-generate-hint {
  font-size: .68rem; color: var(--muted); line-height: 1.6; text-align: center;
  padding: 0 4px;
}

/* ── Result banners ── */
.qp-result {
  display: flex; align-items: center; gap: 14px;
  padding: 16px; border-radius: var(--r);
  border: 1px solid; font-size: 1.4rem;
  animation: fadeUp .25s cubic-bezier(.22,1,.36,1) both;
}
.qp-result.pass { background: var(--green-lo); border-color: rgba(58,184,122,.25); }
.qp-result.fail { background: var(--red-lo);   border-color: rgba(224,92,92,.25); }
.qp-result-title { font-size: .9rem; font-weight: 800; }
.qp-result.pass .qp-result-title { color: var(--green); }
.qp-result.fail .qp-result-title { color: var(--red); }
.qp-result-sub { font-size: .72rem; color: var(--text-sub); margin-top: 3px; line-height: 1.4; }

/* =============================================================
   SPLIT EDITORS — fill remaining space, gap between
============================================================= */
.qp-editors {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
  padding: 6px;
  background: var(--surface3);
  min-height: 0;
}

.qp-editor-col {
  display: flex; flex-direction: column;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--r);
  overflow: hidden;
  min-height: 0;
}

/* Push Monaco to fill all remaining space */
.qp-editor-col > div:not(.qp-editor-header):not(.qp-output) {
  flex: 1;
  min-height: 0;
}

.qp-editor-header {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 16px; flex-shrink: 0;
  background: var(--surface2);
  border-bottom: 1px solid var(--border);
}

.qp-editor-lang {
  font-family: var(--mono); font-size: .68rem; font-weight: 600;
  color: var(--accent); background: var(--accent-lo);
  border: 1px solid var(--border-hi);
  padding: 3px 9px; border-radius: 4px; flex-shrink: 0;
}

.qp-editor-role {
  font-size: .72rem; font-weight: 700; letter-spacing: .04em;
  color: var(--text-sub); flex: 1;
}

.qp-run-btn {
  padding: 6px 16px; border-radius: var(--r-sm);
  background: var(--accent); color: #fff;
  border: none; font-family: var(--sans);
  font-size: .74rem; font-weight: 800; letter-spacing: .03em;
  cursor: pointer;
  box-shadow: 0 2px 12px rgba(192,99,58,.35);
  transition: opacity .15s, transform .15s, box-shadow .15s;
}
.qp-run-btn:hover:not(:disabled) {
  opacity: .9; transform: translateY(-1px);
  box-shadow: 0 4px 18px rgba(192,99,58,.5);
}
.qp-run-btn:disabled { opacity: .35; cursor: default; }

/* Output panels */
.qp-output {
  flex-shrink: 0; padding: 10px 16px;
  border-top: 1px solid var(--border);
  display: flex; flex-direction: column; gap: 5px;
  background: var(--surface);
}
.qp-output-label {
  font-size: .58rem; font-weight: 800; letter-spacing: .13em;
  text-transform: uppercase; color: var(--muted);
}
.qp-output pre {
  font-family: var(--mono); font-size: .76rem; line-height: 1.6;
  white-space: pre-wrap; word-break: break-all;
  max-height: 90px; overflow-y: auto;
}
.qp-output.ok    pre { color: var(--green); }
.qp-output.error pre { color: var(--red); }

/* =============================================================
   MONACO EDITOR OVERRIDE — warmer, matches theme
============================================================= */
.qp-editor-col .monaco-editor,
.qp-editor-col .monaco-editor-background,
.qp-editor-col .margin {
  background-color: #0f0e0d !important;
}
.qp-editor-col .monaco-editor .view-line span {
  font-family: 'JetBrains Mono', monospace !important;
}
/* Thin scrollbars inside editor */
.qp-editor-col .monaco-scrollable-element > .scrollbar > .slider {
  background: var(--surface3) !important;
  border-radius: 99px !important;
}

/* =============================================================
   NOT FOUND
============================================================= */
.qp-notfound {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; gap: 16px;
  min-height: 100vh; background: var(--bg); color: var(--text-sub);
  font-family: var(--sans); font-size: .88rem;
}
.qp-notfound button {
  background: var(--surface2); border: 1px solid var(--border);
  color: var(--text); padding: 10px 20px; border-radius: var(--r-sm);
  font-family: var(--sans); font-size: .78rem; font-weight: 700; cursor: pointer;
  transition: border-color .15s, background .15s;
}
.qp-notfound button:hover { border-color: var(--border-hi); background: var(--accent-lo); }

/* =============================================================
   ANIMATIONS
============================================================= */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
