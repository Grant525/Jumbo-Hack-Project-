/* =============================================================
   lessons.css  --  programmer dark theme
   Layout: sticky header -> streak banner -> (chapter-nav | main)
   The streak/XP banner is full-width and sticky under the header.
   The question list is the center focus.
============================================================= */

@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');

/* --- Tokens ------------------------------------------------ */
:root {
  --bg:         #0f0e0d;
  --surface:    #161412;
  --surface2:   #1e1a17;
  --surface3:   #272320;
  --border:     rgba(255,255,255,.07);
  --border-hi:  rgba(192,99,58,.3);
  --text:       #f0e8df;
  --text-sub:   #8a7a6e;
  --muted:      #5a4f47;
  --accent:     #c0633a;
  --accent2:    #d4943a;
  --accent-lo:  rgba(192,99,58,.12);
  --green:      #3ab87a;
  --green-lo:   rgba(58,184,122,.1);
  --locked:     #3a3330;
  --mono:       'JetBrains Mono', monospace;
  --sans:       'Space Grotesk', sans-serif;
  --r:          14px;
  --r-sm:       8px;
  --pill:       99px;
  --shadow:     0 4px 24px rgba(0,0,0,.55);
  --shadow-sm:  0 2px 8px  rgba(0,0,0,.35);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  min-height: 100vh;
}

::-webkit-scrollbar       { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface3); border-radius: 99px; }

/* --- Root & bg -------------------------------------------- */
.lessons-root { width: 100%; min-height: 100vh; position: relative; overflow-x: hidden; }

.lessons-bg-grid {
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 55% 45% at 5%  10%, rgba(192,99,58,.07) 0%, transparent 70%),
    radial-gradient(ellipse 40% 35% at 95% 90%, rgba(212,148,58,.05) 0%, transparent 70%);
}
.lessons-bg-grid::before {
  content: '';
  position: absolute; inset: 0;
  background-image: radial-gradient(rgba(255,255,255,.022) 1px, transparent 1px);
  background-size: 28px 28px;
}

/* =============================================================
   HEADER  (58px)
============================================================= */
.lessons-header {
  position: sticky; top: 0; z-index: 100;
  width: 100%; display: flex; align-items: center;
  padding: 0 32px; height: 58px; gap: 28px;
  background: rgba(15,14,13,.93);
  backdrop-filter: blur(16px) saturate(1.3);
  -webkit-backdrop-filter: blur(16px) saturate(1.3);
  border-bottom: 1px solid var(--border);
}

.lessons-logo { display: flex; align-items: center; gap: 9px; flex-shrink: 0; }
.lessons-logo-icon {
  font-family: var(--mono); font-size: .8rem; font-weight: 600;
  color: var(--accent); background: var(--accent-lo);
  border: 1px solid var(--border-hi);
  padding: 4px 9px; border-radius: var(--r-sm);
}
.lessons-logo-text {
  font-size: .9rem; font-weight: 800; color: var(--text); letter-spacing: -.02em;
}

.lessons-nav { display: flex; align-items: center; gap: 2px; flex: 1; }
.nav-link {
  font-family: var(--sans); font-size: .74rem; font-weight: 700;
  letter-spacing: .05em; text-transform: uppercase; text-decoration: none;
  color: var(--text-sub); padding: 6px 14px; border-radius: var(--r-sm);
  border: 1px solid transparent;
  transition: color .15s, background .15s, border-color .15s;
}
.nav-link:hover  { color: var(--text); background: var(--surface2); border-color: var(--border); }
.nav-link.active { color: var(--accent); background: var(--accent-lo); border-color: var(--border-hi); }

.lessons-header-right { margin-left: auto; display: flex; align-items: center; gap: 8px; }

/* Keep the small streak pill in header for mobile fallback */
.lessons-streak-pill {
  display: flex; align-items: center; gap: 6px;
  padding: 5px 12px; border-radius: var(--pill);
  background: var(--surface2); border: 1px solid var(--border);
  font-size: .75rem; font-weight: 700; color: var(--accent); cursor: default;
}

.lessons-avatar {
  width: 32px; height: 32px; border-radius: 50%;
  background: linear-gradient(135deg, #c0633a, #e8c06a);
  display: flex; align-items: center; justify-content: center;
  font-size: .62rem; font-weight: 800; color: #fff; letter-spacing: .04em;
  border: 1.5px solid rgba(255,255,255,.12); cursor: pointer;
  transition: transform .15s, box-shadow .15s;
}
.lessons-avatar:hover { transform: scale(1.1); box-shadow: 0 0 0 3px rgba(192,99,58,.25); }

/* =============================================================
   STREAK BANNER  (72px, sticky just below header)
   NOTE: this element is NOT in the current JSX — you'll need to
   add it as a sibling above .lessons-body, pulling data from
   profile. Example:
     <div className="streak-banner"> ... </div>
   OR repurpose .sidebar styles below if keeping aside.sidebar.
   The styles here are ready for when you add it.
============================================================= */
.streak-banner {
  position: sticky; top: 58px; z-index: 90;
  width: 100%; height: 72px;
  display: flex; align-items: center;
  padding: 0 32px; gap: 0;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  overflow: hidden;
}
.streak-banner::before {
  content: '';
  position: absolute; inset: 0; pointer-events: none;
  background: radial-gradient(ellipse 35% 120% at 15% 50%, rgba(192,99,58,.09), transparent 65%);
}

/* Flame + big number */
.streak-banner-flame  { font-size: 1.7rem; line-height: 1; margin-right: 10px; }
.streak-banner-number {
  font-family: var(--mono); font-size: 2.2rem; font-weight: 800;
  color: var(--accent); line-height: 1; margin-right: 7px;
  text-shadow: 0 0 28px rgba(192,99,58,.5);
}
.streak-banner-label {
  font-size: .65rem; font-weight: 700; letter-spacing: .08em;
  text-transform: uppercase; color: var(--text-sub);
  margin-right: 36px; align-self: flex-end; padding-bottom: 4px;
}

/* Day pips */
.streak-banner-week { display: flex; align-items: center; gap: 5px; margin-right: 36px; }
.streak-banner-pip {
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  padding: 6px 9px; border-radius: var(--r-sm);
  background: var(--surface2); border: 1px solid var(--border);
  min-width: 34px;
  transition: background .15s, border-color .15s;
}
.streak-banner-pip.done { background: var(--accent-lo); border-color: var(--border-hi); }
.streak-banner-pip span:first-child { font-size: .85rem; line-height: 1; }
.streak-banner-pip-day {
  font-family: var(--mono); font-size: .48rem; font-weight: 700;
  text-transform: uppercase; color: var(--muted);
}
.streak-banner-pip.done .streak-banner-pip-day { color: var(--accent); }

/* Divider */
.streak-banner-divider {
  width: 1px; height: 30px; background: var(--border);
  margin-right: 36px; flex-shrink: 0;
}

/* XP */
.streak-banner-xp { display: flex; align-items: baseline; gap: 5px; }
.streak-banner-xp-number {
  font-family: var(--mono); font-size: 1.5rem; font-weight: 800; color: var(--accent2);
}
.streak-banner-xp-label {
  font-size: .62rem; font-weight: 700; letter-spacing: .08em;
  text-transform: uppercase; color: var(--text-sub);
}

/* Lang pair on the far right of the banner */
.streak-banner-lang { margin-left: auto; display: flex; align-items: center; gap: 8px; }

/* =============================================================
   BODY  (2 columns: chapter-nav | question-list)
============================================================= */
.lessons-body {
  position: relative; z-index: 1;
  display: grid;
  grid-template-columns: 240px 1fr 300px;
  grid-template-areas: "nav main sidebar";
  height: calc(100vh - 130px);
  align-items: start;
}

/* Right sidebar */
.sidebar {
  grid-area: sidebar;
  position: sticky; top: 130px;
  height: calc(100vh - 130px); overflow-y: auto;
  padding: 24px 16px 48px;
  border-left: 1px solid var(--border);
  display: flex; flex-direction: column; gap: 14px;
  background: var(--surface);
  scrollbar-width: thin; scrollbar-color: var(--surface3) transparent;
}

/* =============================================================
   CHAPTER NAV
============================================================= */
.chapter-nav {
  grid-area: nav;
  position: sticky; top: 130px;
  height: calc(100vh - 130px); overflow-y: auto; overflow-x: hidden;
  padding: 20px 12px 48px;
  border-right: 1px solid var(--border);
  display: flex; justify-content: center; flex-direction: column; gap: 3px;
  background: var(--surface);
  scrollbar-width: thin; scrollbar-color: var(--surface3) transparent;
}

.chapter-nav-label {
  font-size: .58rem; font-weight: 800; letter-spacing: .14em;
  text-transform: uppercase; color: var(--muted);
  margin-bottom: 10px; padding-left: 8px;
}

.chapter-btn {
  width: 100%; background: none; border: 1px solid transparent;
  border-radius: var(--r); padding: 11px 12px;
  text-align: left; cursor: pointer; font-family: var(--sans);
  display: flex; flex-direction: column; gap: 8px; position: relative;
  transition: background .15s, border-color .15s, transform .15s;
}
.chapter-btn:hover { background: var(--surface2); border-color: var(--border); transform: translateX(2px); }
.chapter-btn.active { background: var(--accent-lo); border-color: var(--border-hi); }
.chapter-btn.active::before {
  content: '';
  position: absolute; left: 0; top: 20%; bottom: 20%;
  width: 2px; border-radius: 0 2px 2px 0; background: var(--accent);
}

.chapter-btn-top { display: flex; justify-content: space-between; align-items: center; }
.chapter-btn-name { font-size: .82rem; font-weight: 700; color: var(--text-sub); transition: color .15s; }
.chapter-btn-count { font-family: var(--mono); font-size: .63rem; color: var(--muted); }
.chapter-btn.active .chapter-btn-name  { color: var(--accent); }
.chapter-btn.active .chapter-btn-count { color: var(--accent2); }

.chapter-btn-bar   { height: 2px; background: var(--surface3); border-radius: 99px; overflow: hidden; }
.chapter-btn-fill  {
  height: 100%; border-radius: 99px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  transition: width .6s cubic-bezier(.34,1.56,.64,1);
}

/* =============================================================
   QUESTION LIST  (main — wide, center stage)
============================================================= */
.question-list-col {
  grid-area: main;
  padding: 40px 48px 100px;
  display: flex; flex-direction: column; gap: 22px;
  animation: fadeUp .35s cubic-bezier(.22,1,.36,1) both;
}

.chapter-heading {
  display: flex; align-items: flex-start;
  justify-content: space-between; gap: 20px;
}
.chapter-title {
  font-size: 2rem; font-weight: 800; letter-spacing: -.6px;
  color: var(--text); line-height: 1.1;
}
.chapter-sub {
  font-size: .72rem; color: var(--text-sub); margin-top: 6px;
  font-family: var(--mono);
}

.chapter-progress-ring {
  flex-shrink: 0; position: relative;
  display: flex; align-items: center; justify-content: center;
}
.ring-pct {
  position: absolute;
  font-size: .6rem; font-weight: 600; font-family: var(--mono); color: var(--accent);
}

/* Overall progress bar */
.overall-bar-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: -10px; }
.overall-bar-label { font-size: .6rem; font-weight: 700; letter-spacing: .08em; text-transform: uppercase; color: var(--muted); }
.overall-bar-pct   { font-family: var(--mono); font-size: .72rem; font-weight: 600; color: var(--accent2); }

.overall-bar-track {
  height: 2px; background: var(--surface3); border-radius: 99px; overflow: hidden;
}
.overall-bar-fill {
  height: 100%; border-radius: 99px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  transition: width .8s cubic-bezier(.34,1.56,.64,1);
  position: relative;
}
.overall-bar-fill::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.25), transparent);
  background-size: 200% 100%;
  animation: shimmer 2.5s infinite linear;
}

/* --- Question cards --------------------------------------- */
.question-list { display: flex; flex-direction: column; gap: 8px; }

.question-card {
  width: 100%; background: var(--surface);
  border: 1px solid var(--border); border-radius: var(--r);
  padding: 18px 20px; display: flex; align-items: center; gap: 16px;
  cursor: pointer; text-align: left; font-family: var(--sans);
  position: relative; overflow: hidden;
  transition: border-color .18s, transform .18s cubic-bezier(.34,1.56,.64,1), background .18s;
  animation: fadeUp .3s cubic-bezier(.22,1,.36,1) both;
}
.question-card::after {
  content: '';
  position: absolute; left: 0; top: 0; bottom: 0; width: 2px;
  background: var(--accent);
  transform: scaleY(0); transform-origin: center;
  transition: transform .2s cubic-bezier(.34,1.56,.64,1);
}
.question-card:hover:not(:disabled)::after  { transform: scaleY(1); }
.question-card.done::after                  { background: var(--green); }
.question-card:hover:not(:disabled) {
  border-color: var(--border-hi); background: var(--surface2); transform: translateX(4px);
}
.question-card.done {
  border-color: rgba(58,184,122,.12);
  background: rgba(58,184,122,.025);
}
.question-card.done:hover:not(:disabled) { border-color: rgba(58,184,122,.28); }
.question-card.locked { opacity: .3; cursor: default; filter: saturate(0); }

.question-card:nth-child(1) { animation-delay: .04s; }
.question-card:nth-child(2) { animation-delay: .08s; }
.question-card:nth-child(3) { animation-delay: .12s; }
.question-card:nth-child(4) { animation-delay: .16s; }
.question-card:nth-child(5) { animation-delay: .20s; }
.question-card:nth-child(6) { animation-delay: .24s; }
.question-card:nth-child(7) { animation-delay: .28s; }
.question-card:nth-child(8) { animation-delay: .32s; }

/* Number badge */
.q-number {
  width: 38px; height: 38px; flex-shrink: 0;
  border-radius: 9px; border: 1px solid;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--mono); font-size: .78rem; font-weight: 600;
  transition: transform .18s cubic-bezier(.34,1.56,.64,1);
}
.question-card:hover:not(:disabled) .q-number { transform: scale(1.08); }
.q-number.done      { border-color: rgba(58,184,122,.3); color: var(--green);  background: var(--green-lo); }
.q-number.available { border-color: var(--border-hi);   color: var(--accent); background: var(--accent-lo); }
.q-number.locked    { border-color: var(--locked);      color: var(--muted);  background: none; }

.q-content { flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 5px; }
.q-top     { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.q-title   { font-size: .93rem; font-weight: 700; color: var(--text); line-height: 1.3; }

.q-done-badge {
  font-family: var(--mono); font-size: .57rem; font-weight: 600;
  letter-spacing: .06em; text-transform: uppercase;
  padding: 2px 7px; border-radius: 4px;
  background: var(--green-lo); color: var(--green); border: 1px solid rgba(58,184,122,.2);
}
.q-locked-badge {
  font-family: var(--mono); font-size: .57rem; font-weight: 600;
  padding: 2px 7px; border-radius: 4px;
  background: var(--surface3); color: var(--muted); border: 1px solid var(--border);
}

.q-desc {
  font-size: .78rem; color: var(--text-sub); line-height: 1.55;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}

.q-output { display: flex; align-items: center; gap: 8px; margin-top: 2px; }
.q-output-label {
  font-size: .57rem; font-weight: 700; letter-spacing: .08em;
  text-transform: uppercase; color: var(--muted); flex-shrink: 0;
}
.q-output code {
  font-family: var(--mono); font-size: .68rem; color: var(--accent2);
  background: rgba(212,148,58,.07); border: 1px solid rgba(212,148,58,.14);
  padding: 2px 9px; border-radius: 5px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 400px;
}

.q-arrow {
  flex-shrink: 0; font-size: .88rem; font-family: var(--mono); color: var(--muted);
  width: 26px; height: 26px; border-radius: 5px;
  display: flex; align-items: center; justify-content: center;
  transition: color .15s, transform .15s, background .15s;
}
.question-card:hover:not(:disabled) .q-arrow {
  color: var(--accent); transform: translateX(3px); background: var(--accent-lo);
}

/* =============================================================
   SIDEBAR CARDS
============================================================= */
.sidebar-card {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 16px;
  display: flex; flex-direction: column; gap: 12px;
}

.sidebar-label {
  font-size: .58rem; font-weight: 800; letter-spacing: .13em;
  text-transform: uppercase; color: var(--muted);
}

/* Streak card */
.streak-card {
  background: var(--surface2);
  border: 1px solid var(--border-hi);
  border-radius: var(--r);
  padding: 18px 16px;
  display: flex; flex-direction: column; gap: 14px;
  position: relative; overflow: hidden;
}
.streak-card::before {
  content: '';
  position: absolute; inset: 0; pointer-events: none;
  background: radial-gradient(ellipse 90% 60% at 50% 0%, rgba(192,99,58,.1), transparent 70%);
}

.streak-top    { display: flex; align-items: center; gap: 12px; }
.streak-flame  { font-size: 2rem; line-height: 1; }
.streak-number {
  font-family: var(--mono); font-size: 2.4rem; font-weight: 800;
  color: var(--accent); line-height: 1;
  text-shadow: 0 0 24px rgba(192,99,58,.45);
}
.streak-label  {
  font-size: .65rem; font-weight: 700; letter-spacing: .07em;
  text-transform: uppercase; color: var(--text-sub); margin-top: 3px;
}

.streak-week { display: flex; justify-content: space-between; gap: 4px; }
.streak-pip {
  flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px;
  padding: 8px 4px; border-radius: var(--r-sm);
  background: var(--surface3); border: 1px solid var(--border);
  transition: background .15s, border-color .15s;
}
.streak-pip.done { background: var(--accent-lo); border-color: var(--border-hi); }
.streak-pip span:first-child { font-size: .82rem; line-height: 1; }
.pip-day {
  font-family: var(--mono); font-size: .5rem; font-weight: 700;
  text-transform: uppercase; color: var(--muted);
}
.streak-pip.done .pip-day { color: var(--accent); }
.streak-sub {
  font-size: .68rem; color: var(--muted); line-height: 1.5; text-align: center;
  border-top: 1px solid var(--border); padding-top: 10px;
}

/* Lesson tracker card */
.lesson-tracker {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 16px;
  display: flex; flex-direction: column; gap: 12px;
}
.lesson-tracker-row {
  display: flex; align-items: center; justify-content: space-between;
}
.lesson-tracker-stat {
  display: flex; flex-direction: column; gap: 3px; align-items: center;
  flex: 1;
}
.lesson-tracker-stat-number {
  font-family: var(--mono); font-size: 1.4rem; font-weight: 800; color: var(--text);
}
.lesson-tracker-stat-number.done  { color: var(--green); }
.lesson-tracker-stat-number.total { color: var(--text-sub); }
.lesson-tracker-stat-number.pct   { color: var(--accent2); }
.lesson-tracker-stat-label {
  font-size: .55rem; font-weight: 700; letter-spacing: .08em;
  text-transform: uppercase; color: var(--muted);
}
.lesson-tracker-divider {
  width: 1px; height: 36px; background: var(--border); flex-shrink: 0;
}
.lesson-tracker-bar-wrap { display: flex; flex-direction: column; gap: 6px; }
.lesson-tracker-bar-track {
  height: 5px; background: var(--surface3); border-radius: 99px; overflow: hidden;
}
.lesson-tracker-bar-fill {
  height: 100%; border-radius: 99px;
  background: linear-gradient(90deg, var(--green), #6ee7a0);
  transition: width .8s cubic-bezier(.34,1.56,.64,1);
}
.lesson-tracker-bar-label {
  display: flex; justify-content: space-between;
  font-family: var(--mono); font-size: .6rem; color: var(--muted);
}

/* =============================================================
   LANG PAIR CHIPS  (used in banner or standalone)
============================================================= */
.lang-pair { display: flex; align-items: center; gap: 6px; width: 100%; }

.lang-chip {
  width: 100px;
  flex-shrink: 0;
  display: flex; align-items: center; gap: 6px;
  padding: 5px 8px 5px 10px;
  border-radius: var(--r-sm);
  background: var(--surface2); border: 1px solid var(--border);
  font-family: var(--sans); font-size: .68rem; font-weight: 700;
  color: var(--text); cursor: pointer;
  overflow: hidden; white-space: nowrap;
  transition: border-color .15s, background .15s;
}
.lang-chip img { display: block; flex-shrink: 0; width: 16px; height: 16px; }
.lang-chip:hover { border-color: var(--border-hi); background: var(--accent-lo); }
.lang-chip.from  { color: var(--accent); border-color: var(--border-hi); background: var(--accent-lo); }
.lang-chip.to    { color: var(--accent2); }
.lang-arrow      { font-family: var(--mono); color: var(--muted); font-size: .85rem; flex-shrink: 0; }

.language-dropdown {
  position: absolute; top: calc(100% + 6px); left: 0; z-index: 200;
  background: var(--surface2); border: 1px solid var(--border-hi);
  border-radius: var(--r-sm); overflow: hidden; min-width: 140px;
  box-shadow: var(--shadow); animation: fadeUp .15s ease;
}
.language-dropdown button {
  width: 100%; padding: 9px 14px; background: none; border: none;
  text-align: left; font-family: var(--sans); font-size: .78rem;
  font-weight: 600; color: var(--text-sub); cursor: pointer;
  transition: background .12s, color .12s;
}
.language-dropdown button:hover { background: var(--accent-lo); color: var(--accent); }

.lang-change-btn {
  padding: 8px 14px; border-radius: var(--r-sm);
  background: none; border: 1px solid var(--border);
  font-family: var(--sans); font-size: .7rem; font-weight: 700;
  color: var(--text-sub); cursor: pointer; white-space: nowrap;
  transition: border-color .15s, color .15s, background .15s;
}
.lang-change-btn:hover { border-color: var(--border-hi); color: var(--accent); background: var(--accent-lo); }

/* =============================================================
   ANIMATIONS
============================================================= */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes shimmer {
  from { background-position: -200% 0; }
  to   { background-position:  200% 0; }
}